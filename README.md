Pre requisitos* Volumen NFS, VFS u otro volumen compartido para el almacén de datos de Alfresco* Esquema de base de datos en MySQL para repositorio de metadata de Alfresco. También puede ser PostgreSQL si se desea. * Apache server para balanceo con módulos mod_proxy, mod_ajp y mod_balancer. Si se usa con Nginx usar los símiles correspondientes a apache, pero en especial usar AJP para la replicación de sesiones.Instalación* Editar y usar el script alfresco_create.shLos valores a editar son:* JVMROUTE_NAME   :   Nombre del nodo para balanceo AJP. Usar nombres distintos para cada nodo. * CONTENT_STORE   :   Ruta de la carpeta de contenidos dentro del contenedor. En este caso será /content* LDAP_ENABLED    :   true o false para habilitar o deshabilitar integración con LDAP en Alfresco * LDAP_AUTH_USERNAMEFORMAT     :  Formato de        uid=%s,cn=People,dc=arkhotech,dc=com \* LDAP_URL        :   URL del repositorio LDAP * LDAP_DEFAULT_ADMINS  :  Usuario administrador de LDAP* LDAP_SECURITY_PRINCIPAL   :   usuario LDAP * LDAP_SECURITY_CREDENTIALS :    Password LDAP* LDAP_GROUP_SEARCHBASE     :  ej. ou=Groups,dc=arkhotech,dc=com * LDAP_USER_SEARCHBASE      :  ej. ou=People,dc=arkhotech,dc=com * DB_KIND                   : mysql o postgresql  * DB_HOST	            :  Host de base de datos* DB_USERNAME		    :  usaurio de base de datos* DB_PASSWORD               : Passeord de usuartio de base de datos* DB_NAME                   : nombre de la base de datosVolúmenesSe necesitan dos volúmenes para que alfresco pueda trabajar:1.- Carpeta donde se guardará todo el contenido que se maneje en Alfresco. Este debe estar apuntando a la carpeta especificada en CONTENT_STORE dentro del container. Para este caso debe estar apuntando a /content 2.- Carpeta de datos y metadatos donde SOLR tiene su repositorio de índices. Este esta  ubicado en la carpeta “/alfresco/alf_data” dentro del container.Para mantener la coherencia se necesita un volumen compartido de tipo NFS o EFA (AWS) que apunten a estas dos carpetas dentro del conteiner, de manera que cada nodo tenga acceso a los mismos datos. Suponiendo que la carpeta compartida se llama /opt/alfresco en el SO host, desde ahí crear dos sub carpetas: una llamada content y la otra alfdata (los nombres pueden cambiar).  Agregar al comando docker run los siguientes argumentos:-v /opt/alfresco/content:/content montar la otra carpeta:-v /opt/alfresco/alfdata:/alfresco/alf_dataImportante: Cuando se esta creando la imagen los volúmenes externos se montan sobre  estos directorios por lo que la información generada durante la instalación de alfresco en este periodo es eliminada.  Por esta razón es que se necesitan agregar estos datos en forma manual.Par ello se debe copiar la carpeta “keystore” completa dentro de /alfresco/alf_data. Realizar esta acción sobre el volumen compartido específicamente sobre la carpeta /opt/alfreco/alfdata. Esta carpeta contiene las credenciales iniciales para poder hacer realizar el login por primera vez. Configuración de balanceoLa configuración se realizó con apache2 y los modulos mod_proxy y mod_balancerEl parámetro  JVMROUTE_NAME debe contener un identificados único para cada nodo y este se agrega al final de la URL en la configuración del Proxy balancer.Existen dos URL de balanceo: una para la consola de administración y otra para la capa de servicios.  Solo la capa de administración tienen control de cookie<VirtualHost *:80>        RedirectMatch ^/$ /share/       #Redirigir el root "/" hacia "/share":q!         <Proxy balancer://app>                BalancerMember ajp://dev3.arkho.tech:8009/share route=alf1                BalancerMember ajp://dev4.arkho.tech:8009/share route=alf2        </Proxy>        <Proxy balancer://service>              BalancerMember ajp://dev3.arkho.tech:8009/alfresco route=alf1              BalancerMember ajp://dev4.arkho.tech:8009/alfresco route=alf2        </Proxy>         ProxyRequests Off         ProxyPassReverse /share balancer://app         ProxyPass /share balancer://app stickysession=JSESSIONID|jsessionid          ProxyPassReverse /alfresco balancer://balancer </VirtualHost>